import{r as c,A as h,u as p,d as f,f as m,j as e,S as y}from"./index-Xj3-ztsO.js";import{C as u,a as C,b as j,c as M,d as A}from"./card-DpOJR0o6.js";import{s as x}from"./subMonths-Du8FVnST.js";import{g as T,B as o,X as l,Y as d,f as D,R as g,C as v,T as w,a as E}from"./generateCategoricalChart-cC7d_8MT.js";var b=T({chartName:"BarChart",GraphicalChild:o,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:l},{axisType:"yAxis",AxisComp:d}],formatAxisMap:D});const S=()=>{const r=c.useMemo(()=>{const a=new Date;return{start:h(x(a,5)),end:a}},[]),n=p(()=>f.transactions.where("date").between(r.start,r.end).toArray(),[r.start.getTime(),r.end.getTime()]),i=c.useMemo(()=>{if(!n)return null;const a={};for(let s=5;s>=0;s--){const t=m(x(new Date,s),"MMM yyyy");a[t]={income:0,expense:0}}return n.forEach(s=>{const t=m(s.date,"MMM yyyy");a[t]&&(s.amount>0?a[t].income+=s.amount:a[t].expense+=Math.abs(s.amount))}),Object.entries(a).map(([s,t])=>({name:s,...t}))},[n]);return e.jsxs(u,{children:[e.jsxs(C,{children:[e.jsx(j,{children:"Income vs. Expense"}),e.jsx(M,{children:"Your cash flow over the last 6 months."})]}),e.jsx(A,{children:i?e.jsx("div",{className:"w-full h-96",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(b,{data:i,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(l,{dataKey:"name"}),e.jsx(d,{tickFormatter:a=>`$${(a/1e3).toFixed(0)}k`}),e.jsx(w,{formatter:a=>a.toLocaleString("en-US",{style:"currency",currency:"CAD"})}),e.jsx(E,{}),e.jsx(o,{dataKey:"income",fill:"#22c55e",name:"Income"}),e.jsx(o,{dataKey:"expense",fill:"#ef4444",name:"Expense"})]})})}):e.jsx(y,{className:"h-96 w-full"})})]})};export{b as B,S as I};
