import{u as x,j as s,f as v,c as w,B as i,L as u,S as c,d as t,a as C}from"./index-Xj3-ztsO.js";import{C as y,a as p,b as f,c as g,d as N}from"./card-DpOJR0o6.js";import{I as b}from"./IncomeVsExpenseChart-BGe1jkLD.js";import{P as T}from"./PageHeader-C4PCHSjN.js";import"./subMonths-Du8FVnST.js";import"./generateCategoricalChart-cC7d_8MT.js";const S=()=>{const e=x(()=>t.transactions.orderBy("date").reverse().limit(5).toArray());return s.jsxs(y,{children:[s.jsxs(p,{children:[s.jsx(f,{children:"Recent Transactions"}),s.jsx(g,{children:"Your last 5 transactions."})]}),s.jsx(N,{children:e?e.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("ul",{className:"space-y-2",children:e.map(n=>s.jsxs("li",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:n.description}),s.jsx("p",{className:"text-sm text-muted-foreground",children:v(n.date,"MMM d, yyyy")})]}),s.jsx("span",{className:w("font-mono",n.amount<0?"text-destructive":"text-green-600"),children:n.amount.toLocaleString("en-US",{style:"currency",currency:"CAD"})})]},n.id))}),s.jsx(i,{asChild:!0,variant:"secondary",className:"w-full",children:s.jsx(u,{to:"/transactions",children:"View All Transactions"})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-4xl mb-2",children:"üí∏"}),s.jsx("h3",{className:"text-lg font-semibold",children:"No transactions yet"}),s.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Import a file or add your first transaction to see it here."}),s.jsx(i,{asChild:!0,variant:"secondary",children:s.jsx(u,{to:"/transactions",children:"Go to Transactions"})})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{className:"h-10 w-full"}),s.jsx(c,{className:"h-10 w-full"}),s.jsx(c,{className:"h-10 w-full"})]})})]})},I=["TFSA","RRSP","FHSA","investment_non_reg"],D=({account:e})=>{const n=x(async()=>I.includes(e.type)?(await t.holdings.where({accountId:e.id}).toArray()).reduce((l,o)=>l+o.bookValue,0):(await t.transactions.where({accountId:e.id}).toArray()).reduce((l,o)=>l+o.amount,0),[e.id,e.type]);return s.jsx("li",{children:s.jsxs(u,{to:`/accounts/${e.id}`,className:"flex justify-between items-center p-2 -mx-2 rounded-md hover:bg-muted transition-colors",children:[s.jsx("span",{children:e.name}),n!==void 0?s.jsx("span",{className:"font-mono",children:n.toLocaleString("en-US",{style:"currency",currency:e.currency})}):s.jsx(c,{className:"h-5 w-24"})]})})},R=["TFSA","RRSP","FHSA","investment_non_reg"],k=()=>{const e=x(async()=>{const n=await t.transactions.toArray(),r=await t.accounts.toArray(),l=await t.holdings.toArray(),o=await t.settings.get("exchangeRates"),j=(o==null?void 0:o.value)||{},m={};for(const a of r)m[a.id]=0;for(const a of n){const d=r.find(A=>A.id===a.accountId);d&&!R.includes(d.type)&&(m[a.accountId]+=a.amount)}for(const a of l)m[a.accountId]+=a.bookValue;let h=0;for(const a of r){const d=m[a.id]||0;a.currency==="CAD"?h+=d:j[a.currency]&&(h+=d*j[a.currency])}return h},[]);return e===void 0?s.jsx(c,{className:"h-5 w-48"}):s.jsxs(s.Fragment,{children:["Total Net Worth: ",e.toLocaleString("en-US",{style:"currency",currency:"CAD"})]})},F=()=>{const e=x(()=>t.accounts.toArray());return s.jsxs(y,{children:[s.jsxs(p,{children:[s.jsx(f,{children:"Accounts"}),s.jsx(g,{children:s.jsx(k,{})})]}),s.jsx(N,{children:e?e.length>0?s.jsx("ul",{className:"space-y-2",children:e.map(n=>s.jsx(D,{account:n},n.id))}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add your first account to see your summary here."}),s.jsx(i,{asChild:!0,children:s.jsxs(u,{to:"/accounts",children:[s.jsx("span",{className:"mr-2",children:"‚ûï"}),"Add Account"]})})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(c,{className:"h-6 w-full"}),s.jsx(c,{className:"h-6 w-full"}),s.jsx(c,{className:"h-6 w-2/3"})]})})]})},M=()=>{const{openAddTransactionDialog:e,openAddTransferDialog:n,openImportDialog:r}=C();return s.jsxs(s.Fragment,{children:[s.jsx(T,{title:"Dashboard üè†",children:s.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[s.jsx(i,{variant:"outline",onClick:r,children:"Import File"}),s.jsx(i,{variant:"outline",onClick:n,children:"Add Transfer"}),s.jsx(i,{onClick:e,children:"Add Transaction"})]})}),s.jsxs("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-3",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(b,{})}),s.jsx("div",{className:"lg:col-span-1 row-start-1 lg:row-start-auto",children:s.jsx(F,{})}),s.jsx("div",{className:"lg:col-span-3",children:s.jsx(S,{})})]})]})};export{M as default};
